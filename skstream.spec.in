%define name       skstream
%define version	   @SKSTREAM_VERSION@
%define release    1
%define serial     1
%define prefix     /usr
%define sysconfdir /etc

Summary:           An iostream socket library.
Name:              %{name} 
Version:           %{version} 
Release:           %{release}
Copyright:         LGPL
Group:             System Environment/Libraries
Source:            %{name}-%{version}.tar.gz
BuildRoot:         /var/tmp/%{name}-%{version}-buildroot
Requires:          libstdc++
BuildRequires:     libstdc++-devel >= 2.95.2

%description
@SKSTREAM_PACKAGE@ is an iostream based socket library in C++. It is based on the Freesockets library, and has been packaged for use by WorldForge.

%package devel
Summary:           An iostream socket library headers and static libs.
Group:             Development/Libraries
Requires:          %{name} = %{version}

%description devel
@SKSTREAM_PACKAGE@ is an iostream based socket library in C++. It is based on the Freesockets library, and has been packaged for use by WorldForge.

%prep
%setup

%build
CXXFLAGS=$RPM_OPT_FLAGS ./configure --enable-static --prefix=%{prefix}
make

%install
rm -rf $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT%{prefix} install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%{prefix}/lib/libskstream-0.2.so.@SKSTREAM_CURRENT@
%{prefix}/lib/libskstream-0.2.so.@SKSTREAM_VERSION_NO@
%doc README COPYING AUTHORS NEWS

%files devel
%defattr(-,root,root)
%{prefix}/bin/skstream-config
%{prefix}/man/man1/skstream-config.1*
%{prefix}/include/skstream-0.2/skstream
%{prefix}/lib/libskstream-0.2.a
%{prefix}/lib/libskstream-0.2.la
%{prefix}/lib/libskstream-0.2.so
%{prefix}/lib/pkgconfig/skstream-0.2.pc
%{prefix}/share/aclocal/skstream.m4
